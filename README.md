# AI –ú–∞–≥–∞ ü§ñ

**–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏** - –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Yandex Cloud, Telegram, HH.ru –∏ LinkedIn.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- PostgreSQL
- Redis
- Yandex Cloud –∞–∫–∫–∞—É–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/your-org/ai-maga.git
cd ai-maga
```

2. **–°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# –∏–ª–∏
venv\Scripts\activate     # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -e .[dev]
```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:**
```bash
docker-compose -f docker/docker-compose.yml up -d
```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
# HTTP API
uvicorn app.api.http.app:app --host 0.0.0.0 --port 8000 --reload

# –ò–ª–∏ CLI
ai-maga chat "–ü—Ä–∏–≤–µ—Ç!"
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
ai-maga/
‚îú‚îÄ‚îÄ app/                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http/         # FastAPI endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli/          # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Typer)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram/     # Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ core/             # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ di.py         # DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.py    # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metrics.py    # –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.py     # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/        # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ domain/           # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py     # –°—É—â–Ω–æ—Å—Ç–∏ –∏ —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.py   # –î–æ–º–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ policies.py   # –ü—Ä–∞–≤–∏–ª–∞ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ events.py     # –î–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice/        # –ì–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–Ω—Ç—É—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm/          # LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orchestrator.py # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integrations/ # –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ adapters/         # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py         # PostgreSQL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis_client.py # Redis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http_client.py # HTTP –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ files.py      # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îî‚îÄ‚îÄ tests/            # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ infra/                # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îú‚îÄ‚îÄ docker/              # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|----------------------|
| `APP_ENV` | –û–∫—Ä—É–∂–µ–Ω–∏–µ | `dev` |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |
| `POSTGRES_DSN` | PostgreSQL DSN | - |
| `REDIS_URL` | Redis URL | `redis://localhost:6379/0` |
| `YC_FOLDER_ID` | Yandex Cloud folder ID | - |
| `YC_OAUTH_TOKEN` | Yandex Cloud OAuth token | - |
| `TG_BOT_TOKEN` | Telegram bot token | - |
| `TG_ALLOWED_USER_IDS` | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ Telegram user IDs | - |
| `HH_API_TOKEN` | HH.ru API token | - |
| `HOTWORD` | –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ | `–ú–∞–≥–∞` |
| `AUDIO_INPUT_DEVICE` | –ê—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞ | `default` |
| `AUDIO_OUTPUT_DEVICE` | –ê—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã–≤–æ–¥–∞ | `default` |

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `.env.example`

## üéØ API

### HTTP API (FastAPI)

#### Health Check
```http
GET /healthz
```

#### Metrics
```http
GET /metrics
```

#### Chat
```http
POST /v1/chat
Content-Type: application/json

{
  "text": "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?",
  "context": [],
  "session_id": "optional-session-id"
}
```

#### Voice Control
```http
POST /v1/voice/enable
POST /v1/voice/disable
```

#### Job Search (HH.ru)
```http
GET /v1/jobs/hh/search?query=python&location=–ú–æ—Å–∫–≤–∞
```

#### OCR
```http
POST /v1/vision/ocr
Content-Type: application/json

{
  "image_data": "base64-encoded-image",
  "screenshot_region": {"x": 0, "y": 0, "width": 100, "height": 100}
}
```

#### Translation
```http
POST /v1/translate
Content-Type: application/json

{
  "text": "Hello world",
  "target_lang": "ru",
  "source_lang": "en"
}
```

### CLI

```bash
# –ß–∞—Ç
ai-maga chat "–ü—Ä–∏–≤–µ—Ç!"

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
ai-maga chat --interactive

# –¢–µ—Å—Ç –≥–æ–ª–æ—Å–∞
ai-maga voice-test

# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
ai-maga status

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
ai-maga config

# –í–µ—Ä—Å–∏—è
ai-maga version
```

## üó£Ô∏è –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

- **"–ú–∞–≥–∞, —Å–ª—É—à–∞–π"** - –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ
- **"–ú–∞–≥–∞, –ø–∞—É–∑–∞"** - –í—ã–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ
- **"–ú–∞–≥–∞, –Ω–∞–π–¥–∏ –≤–∞–∫–∞–Ω—Å–∏–∏ Python –≤ –ú–æ—Å–∫–≤–µ"** - –ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π
- **"–ú–∞–≥–∞, –Ω–∞–ø–æ–º–Ω–∏ –æ –≤—Å—Ç—Ä–µ—á–µ –∑–∞–≤—Ç—Ä–∞ –≤ 10"** - –°–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- **"–ú–∞–≥–∞, –ø–µ—Ä–µ–≤–µ–¥–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç"** - –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
- **"–ú–∞–≥–∞, –ø—Ä–æ—á–∏—Ç–∞–π —ç—Ç–æ"** - –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç –≤—Å–ª—É—Ö

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
pytest
```

### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
```bash
ruff check .
mypy app
bandit -r app
```

### Pre-commit hooks
```bash
pre-commit install
pre-commit run --all-files
```

### Docker
```bash
# –°–±–æ—Ä–∫–∞
docker build -f docker/Dockerfile -t ai-maga .

# –ó–∞–ø—É—Å–∫
docker run -p 8000:8000 ai-maga
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)
- `ai_maga_requests_total` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- `ai_maga_request_duration_seconds` - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- `ai_maga_voice_commands_total` - –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `ai_maga_llm_requests_total` - LLM –∑–∞–ø—Ä–æ—Å—ã
- `ai_maga_errors_total` - –û—à–∏–±–∫–∏

### –õ–æ–≥–∏
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è–º–∏ INFO, ERROR, DEBUG.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Rate limiting –¥–ª—è –≤—Å–µ—Ö API
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Circuit breaker –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- PII —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –ª–æ–≥–∞—Ö

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Yandex Cloud
- **GPT** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- **SpeechKit** - STT/TTS
- **Vision** - OCR
- **Translate** - –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞

### Telegram
–ë–æ—Ç –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è.

### HH.ru
–ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π, –ø–æ–¥–ø–∏—Å–∫–∏, –¥–∞–π–¥–∂–µ—Å—Ç—ã.

### LinkedIn
–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤, –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π —Ä–µ–∂–∏–º –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```bash
pytest app/tests/unit/
```

### Integration —Ç–µ—Å—Ç—ã
```bash
pytest app/tests/integration/ -m integration
```

### Contract —Ç–µ—Å—Ç—ã
```bash
pytest app/tests/contracts/ -m contract
```

## üìà CI/CD

GitHub Actions —Å:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏
- –õ–∏–Ω—Ç–∏–Ω–≥–æ–º –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- –°–±–æ—Ä–∫–æ–π Docker –æ–±—Ä–∞–∑–æ–≤
- –ü—É–±–ª–∏–∫–∞—Ü–∏–µ–π coverage

## üéØ Acceptance Criteria (MVP)

- [x] –ó–∞–ø—É—Å–∫ –æ–¥–Ω–∏–º `docker-compose`
- [x] –õ–æ–∫–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å‚Üí–≥–æ–ª–æ—Å –ø–æ —Ö–æ—Ç–≤–æ—Ä–¥—É
- [x] Telegram –±–æ—Ç —Å —á–∞—Ç–æ–º
- [x] HH –ø–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É
- [x] OCR + Translate
- [x] –ú–µ—Ç—Ä–∏–∫–∏, health, CI –∑–µ–ª—ë–Ω—ã–π
- [x] Zero secrets in repo

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù Contributing

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞—Ç—å feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –∏ —Å–æ–∑–¥–∞—Ç—å PR
5. –î–æ–∂–¥–∞—Ç—å—Å—è review –∏ merge

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- Issues: [GitHub Issues](https://github.com/your-org/ai-maga/issues)
- Docs: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./docs/)
- Wiki: [Wiki](https://github.com/your-org/ai-maga/wiki)
